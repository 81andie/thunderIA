var G=Object.defineProperty;var Y=(e,r,t)=>r in e?G(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var _=(e,r,t)=>Y(e,typeof r!="symbol"?r+"":r,t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var Z=Object.defineProperty,ee=(e,r)=>{for(var t in r)Z(e,t,{get:r[t],enumerable:!0})},T={};ee(T,{audioClassification:()=>be,audioToAudio:()=>ve,automaticSpeechRecognition:()=>he,chatCompletion:()=>Xe,chatCompletionStream:()=>ze,documentQuestionAnswering:()=>Je,featureExtraction:()=>Ce,fillMask:()=>He,imageClassification:()=>Ae,imageSegmentation:()=>ke,imageToImage:()=>Be,imageToText:()=>Ee,objectDetection:()=>Oe,questionAnswering:()=>Me,request:()=>l,sentenceSimilarity:()=>Re,streamingRequest:()=>O,summarization:()=>Pe,tableQuestionAnswering:()=>Ue,tabularClassification:()=>Ge,tabularRegression:()=>Ke,textClassification:()=>$e,textGeneration:()=>je,textGenerationStream:()=>Qe,textToImage:()=>Ie,textToSpeech:()=>we,textToVideo:()=>Se,tokenClassification:()=>qe,translation:()=>Ne,visualQuestionAnswering:()=>We,zeroShotClassification:()=>Fe,zeroShotImageClassification:()=>_e});var V="https://huggingface.co",R="https://api-inference.huggingface.co",te="https://fal.run",re={"text-to-image":{"black-forest-labs/FLUX.1-schnell":"fal-ai/flux/schnell","black-forest-labs/FLUX.1-dev":"fal-ai/flux/dev","playgroundai/playground-v2.5-1024px-aesthetic":"fal-ai/playground-v25","ByteDance/SDXL-Lightning":"fal-ai/lightning-models","PixArt-alpha/PixArt-Sigma-XL-2-1024-MS":"fal-ai/pixart-sigma","stabilityai/stable-diffusion-3-medium":"fal-ai/stable-diffusion-v3-medium","Warlord-K/Sana-1024":"fal-ai/sana","fal/AuraFlow-v0.2":"fal-ai/aura-flow","stabilityai/stable-diffusion-3.5-large":"fal-ai/stable-diffusion-v35-large","stabilityai/stable-diffusion-3.5-large-turbo":"fal-ai/stable-diffusion-v35-large/turbo","stabilityai/stable-diffusion-3.5-medium":"fal-ai/stable-diffusion-v35-medium","Kwai-Kolors/Kolors":"fal-ai/kolors"},"automatic-speech-recognition":{"openai/whisper-large-v3":"fal-ai/whisper"},"text-to-video":{"genmo/mochi-1-preview":"fal-ai/mochi-v1","tencent/HunyuanVideo":"fal-ai/hunyuan-video","THUDM/CogVideoX-5b":"fal-ai/cogvideox-5b","Lightricks/LTX-Video":"fal-ai/ltx-video"}},ae="https://api.replicate.com",ne={"text-to-image":{"black-forest-labs/FLUX.1-dev":"black-forest-labs/flux-dev","black-forest-labs/FLUX.1-schnell":"black-forest-labs/flux-schnell","ByteDance/Hyper-SD":"bytedance/hyper-flux-16step:382cf8959fb0f0d665b26e7e80b8d6dc3faaef1510f14ce017e8c732bb3d1eb7","ByteDance/SDXL-Lightning":"bytedance/sdxl-lightning-4step:5599ed30703defd1d160a25a63321b4dec97101d98b4674bcc56e41f62f35637","playgroundai/playground-v2.5-1024px-aesthetic":"playgroundai/playground-v2.5-1024px-aesthetic:a45f82a1382bed5c7aeb861dac7c7d191b0fdf74d8d57c4a0e6ed7d4d0bf7d24","stabilityai/stable-diffusion-3.5-large-turbo":"stability-ai/stable-diffusion-3.5-large-turbo","stabilityai/stable-diffusion-3.5-large":"stability-ai/stable-diffusion-3.5-large","stabilityai/stable-diffusion-3.5-medium":"stability-ai/stable-diffusion-3.5-medium","stabilityai/stable-diffusion-xl-base-1.0":"stability-ai/sdxl:7762fd07cf82c948538e41f63f77d685e02b063e37e496e96eefd46c929f9bdc"},"text-to-speech":{"OuteAI/OuteTTS-0.3-500M":"jbilcke/oute-tts:39a59319327b27327fa3095149c5a746e7f2aee18c75055c3368237a6503cd26"},"text-to-video":{"genmo/mochi-1-preview":"genmoai/mochi-1:1944af04d098ef69bed7f9d335d102e652203f268ec4aaa2d836f6217217e460"}},ie="https://api.sambanova.ai",oe={conversational:{"Qwen/Qwen2.5-Coder-32B-Instruct":"Qwen2.5-Coder-32B-Instruct","Qwen/Qwen2.5-72B-Instruct":"Qwen2.5-72B-Instruct","Qwen/QwQ-32B-Preview":"QwQ-32B-Preview","meta-llama/Llama-3.3-70B-Instruct":"Meta-Llama-3.3-70B-Instruct","meta-llama/Llama-3.2-1B-Instruct":"Meta-Llama-3.2-1B-Instruct","meta-llama/Llama-3.2-3B-Instruct":"Meta-Llama-3.2-3B-Instruct","meta-llama/Llama-3.2-11B-Vision-Instruct":"Llama-3.2-11B-Vision-Instruct","meta-llama/Llama-3.2-90B-Vision-Instruct":"Llama-3.2-90B-Vision-Instruct","meta-llama/Llama-3.1-8B-Instruct":"Meta-Llama-3.1-8B-Instruct","meta-llama/Llama-3.1-70B-Instruct":"Meta-Llama-3.1-70B-Instruct","meta-llama/Llama-3.1-405B-Instruct":"Meta-Llama-3.1-405B-Instruct","meta-llama/Llama-Guard-3-8B":"Meta-Llama-Guard-3-8B"}},se="https://api.together.xyz",le={"text-to-image":{"black-forest-labs/FLUX.1-Canny-dev":"black-forest-labs/FLUX.1-canny","black-forest-labs/FLUX.1-Depth-dev":"black-forest-labs/FLUX.1-depth","black-forest-labs/FLUX.1-dev":"black-forest-labs/FLUX.1-dev","black-forest-labs/FLUX.1-Redux-dev":"black-forest-labs/FLUX.1-redux","black-forest-labs/FLUX.1-schnell":"black-forest-labs/FLUX.1-pro","stabilityai/stable-diffusion-xl-base-1.0":"stabilityai/stable-diffusion-xl-base-1.0"},conversational:{"databricks/dbrx-instruct":"databricks/dbrx-instruct","deepseek-ai/DeepSeek-R1":"deepseek-ai/DeepSeek-R1","deepseek-ai/DeepSeek-V3":"deepseek-ai/DeepSeek-V3","deepseek-ai/deepseek-llm-67b-chat":"deepseek-ai/deepseek-llm-67b-chat","google/gemma-2-9b-it":"google/gemma-2-9b-it","google/gemma-2b-it":"google/gemma-2-27b-it","meta-llama/Llama-2-13b-chat-hf":"meta-llama/Llama-2-13b-chat-hf","meta-llama/Llama-2-7b-chat-hf":"meta-llama/Llama-2-7b-chat-hf","meta-llama/Llama-3.2-11B-Vision-Instruct":"meta-llama/Llama-Vision-Free","meta-llama/Llama-3.2-3B-Instruct":"meta-llama/Llama-3.2-3B-Instruct-Turbo","meta-llama/Llama-3.2-90B-Vision-Instruct":"meta-llama/Llama-3.2-90B-Vision-Instruct-Turbo","meta-llama/Llama-3.3-70B-Instruct":"meta-llama/Llama-3.3-70B-Instruct-Turbo","meta-llama/Meta-Llama-3-70B-Instruct":"meta-llama/Llama-3-70b-chat-hf","meta-llama/Meta-Llama-3-8B-Instruct":"meta-llama/Meta-Llama-3-8B-Instruct-Turbo","meta-llama/Meta-Llama-3.1-405B-Instruct":"meta-llama/Llama-3.2-11B-Vision-Instruct-Turbo","meta-llama/Meta-Llama-3.1-70B-Instruct":"meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo","meta-llama/Meta-Llama-3.1-8B-Instruct":"meta-llama/Meta-Llama-3.1-8B-Instruct-Turbo-128K","microsoft/WizardLM-2-8x22B":"microsoft/WizardLM-2-8x22B","mistralai/Mistral-7B-Instruct-v0.3":"mistralai/Mistral-7B-Instruct-v0.3","mistralai/Mixtral-8x22B-Instruct-v0.1":"mistralai/Mixtral-8x22B-Instruct-v0.1","mistralai/Mixtral-8x7B-Instruct-v0.1":"mistralai/Mixtral-8x7B-Instruct-v0.1","NousResearch/Nous-Hermes-2-Mixtral-8x7B-DPO":"NousResearch/Nous-Hermes-2-Mixtral-8x7B-DPO","nvidia/Llama-3.1-Nemotron-70B-Instruct-HF":"nvidia/Llama-3.1-Nemotron-70B-Instruct-HF","Qwen/Qwen2-72B-Instruct":"Qwen/Qwen2-72B-Instruct","Qwen/Qwen2.5-72B-Instruct":"Qwen/Qwen2.5-72B-Instruct-Turbo","Qwen/Qwen2.5-7B-Instruct":"Qwen/Qwen2.5-7B-Instruct-Turbo","Qwen/Qwen2.5-Coder-32B-Instruct":"Qwen/Qwen2.5-Coder-32B-Instruct","Qwen/QwQ-32B-Preview":"Qwen/QwQ-32B-Preview","scb10x/llama-3-typhoon-v1.5-8b-instruct":"scb10x/scb10x-llama3-typhoon-v1-5-8b-instruct","scb10x/llama-3-typhoon-v1.5x-70b-instruct-awq":"scb10x/scb10x-llama3-typhoon-v1-5x-4f316"},"text-generation":{"meta-llama/Llama-2-70b-hf":"meta-llama/Llama-2-70b-hf","mistralai/Mixtral-8x7B-v0.1":"mistralai/Mixtral-8x7B-v0.1"}};function E(e){return/^http(s?):/.test(e)||e.startsWith("/")}var k=`${V}/api/inference-proxy/{{PROVIDER}}`,S=null;async function Q(e,r){const{accessToken:t,endpointUrl:a,provider:n,model:i,...o}=e;let d=o;const s=n??"hf-inference",{forceTask:f,includeCredentials:m,taskHint:u,wait_for_model:L,use_cache:x,dont_load_model:p,chatCompletion:b}=r??{};if(a&&s!=="hf-inference")throw new Error("Cannot use endpointUrl with a third-party provider.");if(f&&s!=="hf-inference")throw new Error("Cannot use forceTask with a third-party provider.");if(i&&E(i))throw new Error("Model URLs are no longer supported. Use endpointUrl instead.");let g;if(i)g=D({model:i,provider:s,taskHint:u,chatCompletion:b});else if(u)g=D({model:await ue(u),provider:s,taskHint:u,chatCompletion:b});else throw new Error("No model provided, and no default model found for this task");const H=t?t.startsWith("hf_")?"hf-token":"provider-key":m==="include"?"credentials-include":"none",J=a?b?a+"/v1/chat/completions":a:ce({authMethod:H,chatCompletion:b??!1,forceTask:f,model:g,provider:s??"hf-inference",taskHint:u}),h={};t&&(h.Authorization=s==="fal-ai"&&H==="provider-key"?`Key ${t}`:`Bearer ${t}`);const M="data"in e&&!!e.data;M||(h["Content-Type"]="application/json"),s==="hf-inference"&&(L&&(h["X-Wait-For-Model"]="true"),x===!1&&(h["X-Use-Cache"]="false"),p&&(h["X-Load-Model"]="0")),s==="replicate"&&(h.Prefer="wait");let A;if(typeof m=="string"?A=m:m===!0&&(A="include"),s==="replicate"){const K=g.includes(":")?g.split(":")[1]:void 0;d={input:d,version:K}}const W={headers:h,method:"POST",body:M?e.data:JSON.stringify({...d,...b||s==="together"?{model:g}:void 0}),...A?{credentials:A}:void 0,signal:r==null?void 0:r.signal};return{url:J,info:W}}function D(e){if(e.provider==="hf-inference")return e.model;if(!e.taskHint)throw new Error("taskHint must be specified when using a third-party provider");const r=e.taskHint==="text-generation"&&e.chatCompletion?"conversational":e.taskHint,t=(()=>{var a,n,i,o;switch(e.provider){case"fal-ai":return(a=re[r])==null?void 0:a[e.model];case"replicate":return(n=ne[r])==null?void 0:n[e.model];case"sambanova":return(i=oe[r])==null?void 0:i[e.model];case"together":return(o=le[r])==null?void 0:o[e.model]}})();if(!t)throw new Error(`Model ${e.model} is not supported for task ${r} and provider ${e.provider}`);return t}function ce(e){if(e.authMethod==="none"&&e.provider!=="hf-inference")throw new Error("Authentication is required when requesting a third-party provider. Please provide accessToken");const r=e.provider!=="hf-inference"&&e.authMethod!=="provider-key";switch(e.provider){case"fal-ai":return`${r?k.replace("{{PROVIDER}}",e.provider):te}/${e.model}`;case"replicate":{const t=r?k.replace("{{PROVIDER}}",e.provider):ae;return e.model.includes(":")?`${t}/v1/predictions`:`${t}/v1/models/${e.model}/predictions`}case"sambanova":{const t=r?k.replace("{{PROVIDER}}",e.provider):ie;return e.taskHint==="text-generation"&&e.chatCompletion?`${t}/v1/chat/completions`:t}case"together":{const t=r?k.replace("{{PROVIDER}}",e.provider):se;return e.taskHint==="text-to-image"?`${t}/v1/images/generations`:e.taskHint==="text-generation"?e.chatCompletion?`${t}/v1/chat/completions`:`${t}/v1/completions`:t}default:{const t=e.forceTask?`${R}/pipeline/${e.forceTask}/${e.model}`:`${R}/models/${e.model}`;return e.taskHint==="text-generation"&&e.chatCompletion?t+"/v1/chat/completions":t}}}async function ue(e){S||(S=await de());const r=S[e];if(((r==null?void 0:r.models.length)??0)<=0)throw new Error(`No default model defined for task ${e}, please define the model explicitly.`);return r.models[0].id}async function de(){const e=await fetch(`${V}/api/tasks`);if(!e.ok)throw new Error("Failed to load tasks definitions from Hugging Face Hub.");return await e.json()}async function l(e,r){var i;const{url:t,info:a}=await Q(e,r),n=await((r==null?void 0:r.fetch)??fetch)(t,a);if((r==null?void 0:r.retry_on_error)!==!1&&n.status===503&&!(r!=null&&r.wait_for_model))return l(e,{...r,wait_for_model:!0});if(!n.ok){const o=n.headers.get("Content-Type");if(["application/json","application/problem+json"].some(s=>o==null?void 0:o.startsWith(s))){const s=await n.json();throw[400,422,404,500].includes(n.status)&&(r!=null&&r.chatCompletion)?new Error(`Server ${e.model} does not seem to support chat completion. Error: ${JSON.stringify(s.error)}`):s.error||s.detail?new Error(JSON.stringify(s.error??s.detail)):new Error(s)}const d=o!=null&&o.startsWith("text/plain;")?await n.text():void 0;throw new Error(d??"An error occurred while fetching the blob")}return(i=n.headers.get("Content-Type"))!=null&&i.startsWith("application/json")?await n.json():await n.blob()}function fe(e){let r,t,a,n=!1;return function(o){r===void 0?(r=o,t=0,a=-1):r=me(r,o);const d=r.length;let s=0;for(;t<d;){n&&(r[t]===10&&(s=++t),n=!1);let f=-1;for(;t<d&&f===-1;++t)switch(r[t]){case 58:a===-1&&(a=t-s);break;case 13:n=!0;case 10:f=t;break}if(f===-1)break;e(r.subarray(s,f),a),s=t,a=-1}s===d?r=void 0:s!==0&&(r=r.subarray(s),t-=s)}}function pe(e,r,t){let a=P();const n=new TextDecoder;return function(o,d){if(o.length===0)t==null||t(a),a=P();else if(d>0){const s=n.decode(o.subarray(0,d)),f=d+(o[d+1]===32?2:1),m=n.decode(o.subarray(f));switch(s){case"data":a.data=a.data?a.data+`
`+m:m;break;case"event":a.event=m;break;case"id":e(a.id=m);break;case"retry":const u=parseInt(m,10);isNaN(u)||r(a.retry=u);break}}}}function me(e,r){const t=new Uint8Array(e.length+r.length);return t.set(e),t.set(r,e.length),t}function P(){return{data:"",event:"",id:"",retry:void 0}}async function*O(e,r){var f,m;const{url:t,info:a}=await Q({...e,stream:!0},r),n=await((r==null?void 0:r.fetch)??fetch)(t,a);if((r==null?void 0:r.retry_on_error)!==!1&&n.status===503&&!(r!=null&&r.wait_for_model))return yield*O(e,{...r,wait_for_model:!0});if(!n.ok){if((f=n.headers.get("Content-Type"))!=null&&f.startsWith("application/json")){const u=await n.json();if([400,422,404,500].includes(n.status)&&(r!=null&&r.chatCompletion))throw new Error(`Server ${e.model} does not seem to support chat completion. Error: ${u.error}`);if(typeof u.error=="string")throw new Error(u.error);if(u.error&&"message"in u.error&&typeof u.error.message=="string")throw new Error(u.error.message)}throw new Error(`Server response contains error: ${n.status}`)}if(!((m=n.headers.get("content-type"))!=null&&m.startsWith("text/event-stream")))throw new Error("Server does not support event stream content type, it returned "+n.headers.get("content-type"));if(!n.body)return;const i=n.body.getReader();let o=[];const s=fe(pe(()=>{},()=>{},u=>{o.push(u)}));try{for(;;){const{done:u,value:L}=await i.read();if(u)return;s(L);for(const x of o)if(x.data.length>0){if(x.data==="[DONE]")return;const p=JSON.parse(x.data);if(typeof p=="object"&&p!==null&&"error"in p){const b=typeof p.error=="string"?p.error:typeof p.error=="object"&&p.error&&"message"in p.error&&typeof p.error.message=="string"?p.error.message:JSON.stringify(p.error);throw new Error("Error forwarded from backend: "+b)}yield p}o=[]}}finally{i.releaseLock()}}var c=class extends TypeError{constructor(e){super(`Invalid inference output: ${e}. Use the 'request' method with the same parameters to do a custom call with no type checking.`),this.name="InferenceOutputError"}};function ye(e,r){return Object.assign({},...r.map(t=>{if(e[t]!==void 0)return{[t]:e[t]}}))}function q(e,r){return e.includes(r)}function y(e,r){const t=Array.isArray(r)?r:[r],a=Object.keys(e).filter(n=>!q(t,n));return ye(e,a)}function C(e){return"data"in e?e:{...y(e,"inputs"),data:e.inputs}}async function be(e,r){const t=C(e),a=await l(t,{...r,taskHint:"audio-classification"});if(!(Array.isArray(a)&&a.every(i=>typeof i.label=="string"&&typeof i.score=="number")))throw new c("Expected Array<{label: string, score: number}>");return a}function v(e){if(globalThis.Buffer)return globalThis.Buffer.from(e).toString("base64");{const r=[];return e.forEach(t=>{r.push(String.fromCharCode(t))}),globalThis.btoa(r.join(""))}}async function he(e,r){const t=await ge(e),a=await l(t,{...r,taskHint:"automatic-speech-recognition"});if(!(typeof(a==null?void 0:a.text)=="string"))throw new c("Expected {text: string}");return a}var U=["audio/mpeg","audio/mp4","audio/wav","audio/x-wav"];async function ge(e){if(e.provider==="fal-ai"){const r="data"in e&&e.data instanceof Blob?e.data:"inputs"in e?e.inputs:void 0,t=r==null?void 0:r.type;if(!t)throw new Error("Unable to determine the input's content-type. Make sure your are passing a Blob when using provider fal-ai.");if(!U.includes(t))throw new Error(`Provider fal-ai does not support blob type ${t} - supported content types are: ${U.join(", ")}`);const a=v(new Uint8Array(await r.arrayBuffer()));return{..."data"in e?y(e,"data"):y(e,"inputs"),audio_url:`data:${t};base64,${a}`}}else return C(e)}async function we(e,r){const t=await l(e,{...r,taskHint:"text-to-speech"});if(t instanceof Blob)return t;if(t&&typeof t=="object"&&"output"in t){if(typeof t.output=="string")return await(await fetch(t.output)).blob();if(Array.isArray(t.output))return await(await fetch(t.output[0])).blob()}throw new c("Expected Blob or object with output")}async function ve(e,r){const t=C(e),a=await l(t,{...r,taskHint:"audio-to-audio"});return xe(a)}function xe(e){if(!Array.isArray(e))throw new c("Expected Array");if(!e.every(r=>typeof r=="object"&&r&&"label"in r&&typeof r.label=="string"&&"content-type"in r&&typeof r["content-type"]=="string"&&"blob"in r&&typeof r.blob=="string"))throw new c("Expected Array<{label: string, audio: Blob}>");return e}function I(e){return"data"in e?e:{...y(e,"inputs"),data:e.inputs}}async function Ae(e,r){const t=I(e),a=await l(t,{...r,taskHint:"image-classification"});if(!(Array.isArray(a)&&a.every(i=>typeof i.label=="string"&&typeof i.score=="number")))throw new c("Expected Array<{label: string, score: number}>");return a}async function ke(e,r){const t=I(e),a=await l(t,{...r,taskHint:"image-segmentation"});if(!(Array.isArray(a)&&a.every(i=>typeof i.label=="string"&&typeof i.mask=="string"&&typeof i.score=="number")))throw new c("Expected Array<{label: string, mask: string, score: number}>");return a}async function Ee(e,r){var n;const t=I(e),a=(n=await l(t,{...r,taskHint:"image-to-text"}))==null?void 0:n[0];if(typeof(a==null?void 0:a.generated_text)!="string")throw new c("Expected {generated_text: string}");return a}async function Oe(e,r){const t=I(e),a=await l(t,{...r,taskHint:"object-detection"});if(!(Array.isArray(a)&&a.every(i=>typeof i.label=="string"&&typeof i.score=="number"&&typeof i.box.xmin=="number"&&typeof i.box.ymin=="number"&&typeof i.box.xmax=="number"&&typeof i.box.ymax=="number")))throw new c("Expected Array<{label:string; score:number; box:{xmin:number; ymin:number; xmax:number; ymax:number}}>");return a}async function Ie(e,r){const t=e.provider==="together"||e.provider==="fal-ai"||e.provider==="replicate"?{...y(e,["inputs","parameters"]),...e.parameters,...e.provider!=="replicate"?{response_format:"base64"}:void 0,prompt:e.inputs}:e,a=await l(t,{...r,taskHint:"text-to-image"});if(a&&typeof a=="object"){if(e.provider==="fal-ai"&&"images"in a&&Array.isArray(a.images)&&a.images[0].url)return await(await fetch(a.images[0].url)).blob();if("data"in a&&Array.isArray(a.data)&&a.data[0].b64_json){const i=a.data[0].b64_json;return await(await fetch(`data:image/jpeg;base64,${i}`)).blob()}if("output"in a&&Array.isArray(a.output))return await(await fetch(a.output[0])).blob()}if(!(a&&a instanceof Blob))throw new c("Expected Blob");return a}async function Be(e,r){let t;e.parameters?t={...e,inputs:v(new Uint8Array(e.inputs instanceof ArrayBuffer?e.inputs:await e.inputs.arrayBuffer()))}:t={accessToken:e.accessToken,model:e.model,data:e.inputs};const a=await l(t,{...r,taskHint:"image-to-image"});if(!(a&&a instanceof Blob))throw new c("Expected Blob");return a}async function Le(e){return e.inputs instanceof Blob?{...e,inputs:{image:v(new Uint8Array(await e.inputs.arrayBuffer()))}}:{...e,inputs:{image:v(new Uint8Array(e.inputs.image instanceof ArrayBuffer?e.inputs.image:await e.inputs.image.arrayBuffer()))}}}async function _e(e,r){const t=await Le(e),a=await l(t,{...r,taskHint:"zero-shot-image-classification"});if(!(Array.isArray(a)&&a.every(i=>typeof i.label=="string"&&typeof i.score=="number")))throw new c("Expected Array<{label: string, score: number}>");return a}var $=["fal-ai","replicate"];async function Se(e,r){if(!e.provider||!q($,e.provider))throw new Error(`textToVideo inference is only supported for the following providers: ${$.join(", ")}`);const t=e.provider==="fal-ai"||e.provider==="replicate"?{...y(e,["inputs","parameters"]),...e.parameters,prompt:e.inputs}:e,a=await l(t,{...r,taskHint:"text-to-video"});if(e.provider==="fal-ai"){if(!(typeof a=="object"&&!!a&&"video"in a&&typeof a.video=="object"&&!!a.video&&"url"in a.video&&typeof a.video.url=="string"&&E(a.video.url)))throw new c("Expected { video: { url: string } }");return await(await fetch(a.video.url)).blob()}else{if(!(typeof a=="object"&&!!a&&"output"in a&&typeof a.output=="string"&&E(a.output)))throw new c("Expected { output: string }");return await(await fetch(a.output)).blob()}}var w=new Map,Te=10*60*1e3,Ve=1e3;async function N(e,r,t){if(E(e))return null;const a=`${e}:${r}`;let n=w.get(a);if(n&&n.date<new Date(Date.now()-Te)&&(w.delete(a),n=void 0),n===void 0){const i=await((t==null?void 0:t.fetch)??fetch)(`${V}/api/models/${e}?expand[]=pipeline_tag`,{headers:r?{Authorization:`Bearer ${r}`}:{}}).then(o=>o.json()).then(o=>o.pipeline_tag).catch(()=>null);if(!i)return null;n={task:i,date:new Date},w.set(a,{task:i,date:new Date}),w.size>Ve&&w.delete(w.keys().next().value)}return n.task}async function Ce(e,r){const t=e.model?await N(e.model,e.accessToken,r):void 0,a=await l(e,{...r,taskHint:"feature-extraction",...t==="sentence-similarity"&&{forceTask:"feature-extraction"}});let n=!0;const i=(o,d,s=0)=>s>d?!1:o.every(f=>Array.isArray(f))?o.every(f=>i(f,d,s+1)):o.every(f=>typeof f=="number");if(n=Array.isArray(a)&&i(a,3,0),!n)throw new c("Expected Array<number[][][] | number[][] | number[] | number>");return a}async function He(e,r){const t=await l(e,{...r,taskHint:"fill-mask"});if(!(Array.isArray(t)&&t.every(n=>typeof n.score=="number"&&typeof n.sequence=="string"&&typeof n.token=="number"&&typeof n.token_str=="string")))throw new c("Expected Array<{score: number, sequence: string, token: number, token_str: string}>");return t}async function Me(e,r){const t=await l(e,{...r,taskHint:"question-answering"});if(!(Array.isArray(t)?t.every(n=>typeof n=="object"&&!!n&&typeof n.answer=="string"&&typeof n.end=="number"&&typeof n.score=="number"&&typeof n.start=="number"):typeof t=="object"&&!!t&&typeof t.answer=="string"&&typeof t.end=="number"&&typeof t.score=="number"&&typeof t.start=="number"))throw new c("Expected Array<{answer: string, end: number, score: number, start: number}>");return Array.isArray(t)?t[0]:t}async function Re(e,r){const t=e.model?await N(e.model,e.accessToken,r):void 0,a=await l(De(e),{...r,taskHint:"sentence-similarity",...t==="feature-extraction"&&{forceTask:"sentence-similarity"}});if(!(Array.isArray(a)&&a.every(i=>typeof i=="number")))throw new c("Expected number[]");return a}function De(e){return{...y(e,["inputs","parameters"]),inputs:{...y(e.inputs,"sourceSentence")},parameters:{source_sentence:e.inputs.sourceSentence,...e.parameters}}}async function Pe(e,r){const t=await l(e,{...r,taskHint:"summarization"});if(!(Array.isArray(t)&&t.every(n=>typeof(n==null?void 0:n.summary_text)=="string")))throw new c("Expected Array<{summary_text: string}>");return t==null?void 0:t[0]}async function Ue(e,r){const t=await l(e,{...r,taskHint:"table-question-answering"});if(!(Array.isArray(t)?t.every(n=>j(n)):j(t)))throw new c("Expected {aggregator: string, answer: string, cells: string[], coordinates: number[][]}");return Array.isArray(t)?t[0]:t}function j(e){return typeof e=="object"&&!!e&&"aggregator"in e&&typeof e.aggregator=="string"&&"answer"in e&&typeof e.answer=="string"&&"cells"in e&&Array.isArray(e.cells)&&e.cells.every(r=>typeof r=="string")&&"coordinates"in e&&Array.isArray(e.coordinates)&&e.coordinates.every(r=>Array.isArray(r)&&r.every(t=>typeof t=="number"))}async function $e(e,r){var n;const t=(n=await l(e,{...r,taskHint:"text-classification"}))==null?void 0:n[0];if(!(Array.isArray(t)&&t.every(i=>typeof(i==null?void 0:i.label)=="string"&&typeof i.score=="number")))throw new c("Expected Array<{label: string, score: number}>");return t}function B(e){return Array.isArray(e)?e:[e]}async function je(e,r){if(e.provider==="together"){e.prompt=e.inputs;const t=await l(e,{...r,taskHint:"text-generation"});if(!(typeof t=="object"&&"choices"in t&&Array.isArray(t==null?void 0:t.choices)&&typeof(t==null?void 0:t.model)=="string"))throw new c("Expected ChatCompletionOutput");return{generated_text:t.choices[0].text}}else{const t=B(await l(e,{...r,taskHint:"text-generation"}));if(!(Array.isArray(t)&&t.every(n=>"generated_text"in n&&typeof(n==null?void 0:n.generated_text)=="string")))throw new c("Expected Array<{generated_text: string}>");return t==null?void 0:t[0]}}async function*Qe(e,r){yield*O(e,{...r,taskHint:"text-generation"})}async function qe(e,r){const t=B(await l(e,{...r,taskHint:"token-classification"}));if(!(Array.isArray(t)&&t.every(n=>typeof n.end=="number"&&typeof n.entity_group=="string"&&typeof n.score=="number"&&typeof n.start=="number"&&typeof n.word=="string")))throw new c("Expected Array<{end: number, entity_group: string, score: number, start: number, word: string}>");return t}async function Ne(e,r){const t=await l(e,{...r,taskHint:"translation"});if(!(Array.isArray(t)&&t.every(n=>typeof(n==null?void 0:n.translation_text)=="string")))throw new c("Expected type Array<{translation_text: string}>");return(t==null?void 0:t.length)===1?t==null?void 0:t[0]:t}async function Fe(e,r){const t=B(await l(e,{...r,taskHint:"zero-shot-classification"}));if(!(Array.isArray(t)&&t.every(n=>Array.isArray(n.labels)&&n.labels.every(i=>typeof i=="string")&&Array.isArray(n.scores)&&n.scores.every(i=>typeof i=="number")&&typeof n.sequence=="string")))throw new c("Expected Array<{labels: string[], scores: number[], sequence: string}>");return t}async function Xe(e,r){const t=await l(e,{...r,taskHint:"text-generation",chatCompletion:!0});if(!(typeof t=="object"&&Array.isArray(t==null?void 0:t.choices)&&typeof(t==null?void 0:t.created)=="number"&&typeof(t==null?void 0:t.id)=="string"&&typeof(t==null?void 0:t.model)=="string"&&(t.system_fingerprint===void 0||typeof t.system_fingerprint=="string")&&typeof(t==null?void 0:t.usage)=="object"))throw new c("Expected ChatCompletionOutput");return t}async function*ze(e,r){yield*O(e,{...r,taskHint:"text-generation",chatCompletion:!0})}async function Je(e,r){const t={...e,inputs:{question:e.inputs.question,image:v(new Uint8Array(await e.inputs.image.arrayBuffer()))}},a=B(await l(t,{...r,taskHint:"document-question-answering"}));if(!(Array.isArray(a)&&a.every(i=>typeof i=="object"&&!!i&&typeof(i==null?void 0:i.answer)=="string"&&(typeof i.end=="number"||typeof i.end>"u")&&(typeof i.score=="number"||typeof i.score>"u")&&(typeof i.start=="number"||typeof i.start>"u"))))throw new c("Expected Array<{answer: string, end?: number, score?: number, start?: number}>");return a[0]}async function We(e,r){const t={...e,inputs:{question:e.inputs.question,image:v(new Uint8Array(await e.inputs.image.arrayBuffer()))}},a=await l(t,{...r,taskHint:"visual-question-answering"});if(!(Array.isArray(a)&&a.every(i=>typeof i=="object"&&!!i&&typeof(i==null?void 0:i.answer)=="string"&&typeof i.score=="number")))throw new c("Expected Array<{answer: string, score: number}>");return a[0]}async function Ke(e,r){const t=await l(e,{...r,taskHint:"tabular-regression"});if(!(Array.isArray(t)&&t.every(n=>typeof n=="number")))throw new c("Expected number[]");return t}async function Ge(e,r){const t=await l(e,{...r,taskHint:"tabular-classification"});if(!(Array.isArray(t)&&t.every(n=>typeof n=="number")))throw new c("Expected number[]");return t}var Ye=class{constructor(e="",r={}){_(this,"accessToken");_(this,"defaultOptions");this.accessToken=e,this.defaultOptions=r;for(const[t,a]of Object.entries(T))Object.defineProperty(this,t,{enumerable:!1,value:(n,i)=>a({...n,accessToken:e},{...r,...i})})}endpoint(e){return new Ze(e,this.accessToken,this.defaultOptions)}},Ze=class{constructor(e,r="",t={}){for(const[a,n]of Object.entries(T))Object.defineProperty(this,a,{enumerable:!1,value:(i,o)=>n({...i,accessToken:r,endpointUrl:e},{...t,...o})})}};function et(){document.querySelector(".sidebar").classList.toggle("-translate-x-full")}let F="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";console.log(F);const X=new Ye(`${F}`);console.log(X);async function tt(e){const r=document.getElementById("historyContainer"),t=document.createElement("p");t.id="loadingMessage",t.innerHTML='<div class="loader flex justify-center text-center"><img src="https://svgsilh.com/svg/159507.svg" class="w-32 h-32"/></div> <strong>Cargando...</strong>',r.appendChild(t),setTimeout(()=>{t.remove();const a=document.createElement("div");a.innerHTML=`
        <h2>✅ Contenido cargado</h2>
        <p>Aquí tienes los resultados de la API.</p>
      `,r.appendChild(a)},7e3);try{const a=await X.chatCompletion({model:"deepseek-ai/DeepSeek-V3",messages:[{role:"user",content:e}],provider:"together",max_tokens:200});console.log("Respuesta de la API:",a);const n={id:a.id,timestamp:new Date().toISOString(),question:e,response:a.choices[0].message.content};let i=JSON.parse(localStorage.getItem("ia")||"[]");return i.push(n),localStorage.setItem("ia",JSON.stringify(i)),a.choices[0].message.content}catch(a){return console.error("Error:",a),"Hubo un error al procesar tu solicitud."}}function z(){const e=document.getElementById("historyContainer");if(!e){console.error("Elemento historyContainer no encontrado en el DOM");return}e.innerHTML="",JSON.parse(localStorage.getItem("ia")||"[]").forEach((t,a)=>{const n=`<div class="mb-4 mt-4 flex flex-row md:w-xl  gap-2.5 mb-1 w-xs ">
   <img class="w-8 h-8 rounded-full" src="https://static.vecteezy.com/system/resources/thumbnails/005/129/844/small/profile-user-icon-isolated-on-white-background-eps10-free-vector.jpg" alt="Jese image">
   <div class="flex flex-col w-full leading-1.5 p-2 bg-lime-100 rounded-e-xl  ">
      <div class="flex items-center space-x-1 rtl:space-x-reverse">
         <span class="text-sm font-bold text-gray-900 text-gray-500">You</span>
         <span class="text-sm font-normal text-gray-500 dark:text-gray-400">${new Date(t.timestamp).toLocaleString()}</span>
      </div>
      <p class="text-sm font-normal py-2.5 text-gray-900 dark:text-black">${t.question}</p>
      <span class="text-sm font-normal text-gray-500 dark:text-gray-400">Delivered</span>
   </div>
   
</div>

<div class="md:ml-5 flex flex-row md:w-xl gap-2.5 mb-1 w-xs ">
   <img class="w-8 h-8 rounded-full" src="public/thunder4.png" alt="Jese image">
   <div class="flex flex-col w-full w-xs md:w-xl lg:w-lg leading-1.5 p-1 border-gray-200 bg-slate-50 rounded-e-xl rounded-es-xl dark:bg-gray-300">
      <div class="flex items-center space-x-2 rtl:space-x-reverse ">
         <span class="text-sm font-bold text-gray-900 text-gray-500 ">Thunder response</span>
         <span class="text-sm font-normal dark:text-gray-400">${new Date(t.timestamp).toLocaleString()}</span>
      </div>
      <p class="text-sm font-normal py-1.5 text-gray-800 animation-text">${t.response} </p>
      <span class="text-sm font-normal text-gray-500 dark:text-gray-400">Delivered</span>
   </div>
  
   </div>
</div>


`;e.innerHTML+=n})}function rt(){const e=document.getElementById("container-date");if(!e){console.error("Elemento historyContainer no encontrado en el DOM");return}e.innerHTML="";const r=JSON.parse(localStorage.getItem("ia")||"[]");var t={};r.forEach((a,n)=>{let i=a.timestamp.split("T")[0];i in t?(console.log(n),t[i].push({id:a.id,question:a.question})):t[i]=new Array({id:a.id,question:a.question})}),Object.entries(t).forEach(([a,n])=>{let i=`
            <div class="flex w-full flex-col bg-slate-50 p-1 mt-2 rounded-xs ">
            
              <li class="text-md font-thin rounded-sm text-black text-right">${a} <br></li>
                </div>
              
                <div class="w-full flex justify-between flex-col containerBtnsDelete">
                ${n.map(o=>`
            
                <div class="flex justify-end" data-id="${o.id}">
                  <li class="text-right">${o.question}</li>
                   <button onclick="btnDelete('${o.id}')" class="btnTrash ml-10 w-8 h-8 p-2 bg-lime-200"><i class="fa-solid fa-trash-can"></i></button> 

                  </div>
                  
                  `)}

              </div>
           
               
             
            
          
       
             `;e.innerHTML+=i})}rt();function at(e){document.querySelectorAll(".containerBtnsDelete");let r=document.querySelector(`[data-id="${e}"]`);console.log(r),r&&r.remove();let t=JSON.parse(localStorage.getItem("ia"));console.log(t),t&&(t=t.filter(a=>a.id!==e),localStorage.setItem("ia",JSON.stringify(t))),console.log(t)}window.btnDelete=at;document.getElementById("askButton").addEventListener("click",async()=>{const e=document.getElementById("inputText"),r=document.getElementById("responseText"),t=e.value.trim();if(!t){r.innerText="Por favor ingresa una pregunta";return}try{const a=await tt(t);z()}catch{console.error("Error al obtener respuesta:",error)}});document.addEventListener("DOMContentLoaded",z);const nt=document.getElementById("openSidebar");nt.addEventListener("click",et);
